/*ビューって目だけのあのモンスター・・・*/
create view prefecture_user_counts(name, count)
select
 p.name name,
 count(*) count
from
 users u
inner join
 prefectures p
 on u.prefecture_id = p.id
group by
 u.prefecture_id;

/*で作成し*/

SELECT
 name,
 count
from
 prefecture_user_counts;

/*のちに*/

drop view prefecture_user_counts;

/*で削除*/

select
 id,
 last_name,
 email
from
 users
where id not in( 
select
 user_id
from
 orders
where
 order_time>='2017-12-01 00;00;00'
 and order_time<'2018-01-01 00:00:00');

/*()サブクエリ*/